@model Garaget.Models.ParkedVehicle

@{
    ViewBag.Title = "CheckOutVehicle";
}

<h2>Vehicle checked out</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.VehicleType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RegNo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Color)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Make)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Model)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NoWheels)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TimeOfCheckIn)
        </th>
        <th>The Cost</th>
        <th></th>
    </tr>

    <tr>
        <td>
            @Html.DisplayFor(model => model.VehicleType)
        </td>
        <td>
            @Html.DisplayFor(model => model.RegNo)
        </td>                         
        <td>                          
            @Html.DisplayFor(model => model.Color)
        </td>                         
        <td>                          
            @Html.DisplayFor(model => model.Make)
        </td>                         
        <td>                          
            @Html.DisplayFor(model => model.Model)
        </td>                         
        <td>                          
            @Html.DisplayFor(model => model.NoWheels)
        </td>                         
        <td>                          
            @Html.DisplayFor(model => model.TimeOfCheckIn)
        </td>


        <td>
            @{
                var cost = 5000; //cost per hour
                var dateNow = DateTime.Now;
                var totalTime = (dateNow - Model.TimeOfCheckIn).ToString(@"hh\:mm");
                var totalCost =  ( (dateNow - Model.TimeOfCheckIn).TotalHours ) * cost;
                var totalCostToString = totalCost.ToString("C");
                @Html.DisplayFor(modelItem => totalCostToString);
               
            }
           
  
        </td>

       
    </tr>

  
</table>

<!-- Trigger the modal with a button -->
@*<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>*@

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Car Park Receipt</h4>
            </div>
            <div class="modal-body">

                <div>
                    <h4></h4>
                    <hr />
                    <dl class="dl-horizontal">
                        <dt>
                            @Html.DisplayNameFor(model => model.VehicleType)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.VehicleType)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.RegNo)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.RegNo)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.Color)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Color)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.Make)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Make)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.Model)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Model)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.NoWheels)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.NoWheels)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.TimeOfCheckIn)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.TimeOfCheckIn)
                        </dd>

                        <dt>Total cost:</dt>
                        <dd>
                            @Html.DisplayFor(modelItem => totalCostToString)
                           
                           
                        </dd>

                    </dl>

                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default">Print Dummy Button</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>






@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-actions no-color">
        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">Print receipt</button>
        @Html.ActionLink("Back to List", "Index")

    </div>
}


